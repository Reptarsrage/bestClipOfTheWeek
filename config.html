<!DOCTYPE html>
<html>
<!--
    Justin Robb
    4/20/15
    bestClipOfTheWeek
    Configuration page
-->

<head>
    <title>Best Clip of the Week - Configuration</title>
    <link rel="shortcut icon" href="/common/images/sm64.ico">

    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv='cache-control' content='no-cache'>
    <meta http-equiv='expires' content='0'>
    <meta http-equiv='pragma' content='no-cache'>

    <link type="text/css" rel="stylesheet" href="/Style/jquery-ui.min.css">
    <link type="text/css" rel="stylesheet" href="/Style/common.css">
    <link type="text/css" rel="stylesheet" href="/Style/config.css">

    <script type="text/javascript" src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

    <!-- check login -->
    <script>
        var urlParams;
        var match,
        pl = /\+/g,  // Regex for replacing addition symbol with a space
        search = /([^&=]+)=?([^&]*)/g,
        decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
        query = window.location.search.substring(1);

        urlParams = {};
        while (match = search.exec(query))
            urlParams[decode(match[1])] = decode(match[2]);

        //check for token
        if (!urlParams['token'] || !urlParams['username'])
            window.location = "login.html";

        // authorize
        var username = urlParams['username'];
        var token = urlParams['token'];

        $.ajax({
            url: 'https://bestclipoftheweek-1xxoi1ew.rhcloud.com/',
            async: false,
            type: "GET",
            timeout: 5000,
            data: {
                username: username,
                token: token,
                authorize: 'authorize'
            },
            success: function (msg) {
                if (!msg) {
                    window.location = "login.html";
                }
                // msg.status
                // msg.responseText
                // msg. statusText
                if (msg.hasOwnProperty("status")) {
                    if (msg.status != 200)
                        window.location = "login.html";
                }
            },
            error: function (reason) {
                window.location = "login.html";
            },
        });
    </script>

    <script type="text/javascript" src="/Scripts/jquery-ui.min.js"></script>
    <script type="text/javascript" src="/Scripts/tooltips.js"></script>
    <script type="text/javascript" src="/JSColor/jscolor.js"></script>
    <script type="text/javascript" src="/Scripts/header.js"></script>
    <script type="text/javascript" src="/Scripts/config.js"></script>
</head>
<body>
    <!--DUPLICATED ACCROSS PAGES-->
    <div id="header">
        <div id='cssmenu'>
            <ul>
                <li><a id="a_index">Search Youtube</a></li>
                <li><a id="a_quick">Quick Search (no charts)</a></li>
                <li><a id="a_comments">Commenters</a></li>
                <li class='active'><a id="a_config">Configure search terms</a></li>
                <li><a id="a_about">About</a></li>
            </ul>
        </div>
    </div>
    <div id="body">
        <h1 id="message" class="section" hidden="hidden"></h1>
        <h2>Configuration:<img name="configuration" class="tooltip" src="/common/images/info.png" alt="?" /></h2>
        <div class="loading">
            <img class="loading-image" src="common/images/loading.gif" alt="Loading..." />
        </div>
        <table id="table_config" hidden="hidden">
            <thead>
                <tr>
                    <th>Term<img name="term" class="tooltip" src="/common/images/info.png" alt="?" /></th>
                    <th>Color<img name="color" class="tooltip" src="/common/images/info.png" alt="?" /></th>
                    <th class="center">Enabled<img name="enabled" class="tooltip" src="/common/images/info.png" alt="?" /></th>
                    <th></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <!--DUPLICATED ACCROSS PAGES-->
    <div id="footer">
        <div id="footer_overlay">
            <div id="foot_content">
                <span id="foot_credits">Website made by: <b id="foot_myname">Justin Robb</b></span><br />
                <span id="foot_contact_info"><a href="mailto:justinprobb@gmail.com">Contact me</a></span><br />
                <span id="foot_linked_in"><a href="https://www.linkedin.com/in/jurobb">Linkedin</a></span>
                <span id="foot_giy_hub"><a href="https://github.com/Reptarsrage">Github</a></span>
            </div>
        </div>
    </div>
</body>
</html>
